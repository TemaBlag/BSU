# Лабораторная работа № 13

## Система безопасности Microsoft SQL Server (переработано для PostgreSQL)

Цель: научить использовать системные хранимые процедуры для управления именами входа и пользователями баз данных, а также разрешать и запрещать выполнение определенных действий некоторому пользователю.

## Задание 1: Подключение к серверу PostgreSQL

1. Подключитесь к серверу PostgreSQL с помощью утилиты pgAdmin или psql.
2. Укажите имя пользователя (например, `postgres`), пароль и базу данных, к которой хотите подключиться.

## Задание 2: Определение списка ролей сервера

Для получения списка ролей сервера используйте следующий запрос:

```sql
SELECT rolname FROM pg_roles;
```
Этот запрос вернет список всех ролей, существующих на сервере.

##  Задание 3: Создание новой учетной записи

Для добавления учетной записи используйте команду CREATE ROLE:

```sql
CREATE ROLE TempUser_N LOGIN PASSWORD 'Password!';
```

Для проверки создания учетной записи выполните:

```sql
\du
```

Для присвоения учетной записи роли:

```sql
GRANT pg_monitor TO TempUser_N;
```

## Задание 4: Список ролей базы данных и членов роли db_owner

Для получения списка всех ролей в базе данных используйте запрос:

```sql
SELECT rolname FROM pg_roles;
```

Для получения списка членов роли db_owner выполните:

```sql
SELECT grantee
FROM information_schema.role_table_grants
WHERE role_name = 'db_owner';
```

## Задание 5: Создание пользователя базы данных

Для добавления нового пользователя базы данных:

```sql
CREATE USER TempUser_N WITH PASSWORD 'Password!';
```

Для проверки, что пользователь был добавлен:

```sql
\du
```

Для добавления роли db_datareader:

```sql
GRANT db_datareader TO TempUser_N;
```

## Задание 6: Настройка прав доступа для пользователя

Для предоставления прав выборки и обновления:

```sql
GRANT SELECT, UPDATE (sfam, stip) ON STUDENTS TO Andy;
```

## Задание 7: Использование графического интерфейса pgAdmin

Просмотр списка учетных записей и их параметров можно осуществить через интерфейс pgAdmin, выбрав "Login/Group Roles" в разделе "Server".
Для создания новой учетной записи используйте диалоговое окно "Create Role".

## Задание 8: Отмена присвоения роли и удаление учетной записи

Для отмены роли пользователю используйте команду:

```sql
REVOKE db_datareader FROM TempUser_N;
```

Для удаления пользователя базы данных:

```sql
DROP USER TempUser_N;
```

Для удаления учетной записи:

```sql
DROP ROLE TempUser_N;
```
